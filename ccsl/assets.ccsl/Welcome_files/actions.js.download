$('.allforms').on('click', function(e) {

    e.preventDefault();
    var id = $(this).attr('id');

    var getData = $('#' + id).data('content');
    var form = document.getElementById(getData);
    var svgDis = '<svg version="1.1" style="width: 50px; height: 10px; margin: 0px; margin-left: -15px; display:inline-block;"  x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 0 0" xml:space="preserve"><circle fill="#fff" stroke="none" cx="6" cy="10" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite" begin="0.1"/> </circle><circle fill="#fff" stroke="none" cx="26" cy="10" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite" begin="0.2"/> </circle><circle fill="#fff" stroke="none" cx="46" cy="10" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite" begin="0.3"/></circle></svg>';
    var btnText = $('#' + id).text();
    $('#' + id).prop('disabled', true).html('Waiting ' + svgDis);
    for (var i = 0; i < form.elements.length; i++) {
        if (form.elements[i].value === '' && form.elements[i].hasAttribute('required')) {
            $('#' + id).prop('disabled', false).html(btnText);
            //$('.result').fadeIn(3000).html('<span style="color:#f00">There are some required fields!</span>').fadeOut(3000);
            Swal.fire("Error!", 'There are some required fields', "error");
            return false;
        }
    }

    //console.log($('#' + getData).serializeArray());
    //if(form.elements.length === chk){
    $.ajax({
        method: "POST",
        url: $('#' + getData).attr('action'),
        data: $('#' + getData).serializeArray(),
        //headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
        dataType: "json",
        success: function(data) {
            $('#' + id).prop('disabled', false).html(btnText);

            console.log(data);

            // //Scroll to the top
            document.body.scrollTop = 0; // For Safari
            document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
            if (data.status === 200) {
                $("#" + getData)[0].reset();
                if (data.message != '') {
                    Swal.fire("Successfully!", data.message, "success");
                }

            } else {
                console.log(data.message);
            }
        },
        error: function(error) {
            $('#' + id).prop('disabled', false).html(btnText);
            console.log(error);
        }
    });
    //}

    return false;
});

$(document).ready(function() {

    $('#appDownload').on('click', function() {
        alert('Coming Soon');
    });

    // $("#owl-demo").owlCarousel({
    //     //navigation : true,
    //     autoPlay: 3000,
    //     items: 2,
    //     //itemsDesktop : [1199,3],
    //     //itemsDesktopSmall : [979,3],
    //     nav: true,
    //     dots: false,
    //     loop: false,
    //     responsive: {
    //         600: {
    //             items: 4
    //         }
    //     }
    // });


});

$(document).on("keyup", ".only_numeric", function() {
    this.value = this.value.replace(/[^0-9\.]/g, '');
});

$('#customerType').on('change', function() {
    var typ = $('#customerType').val();
    console.log(typ);
    switch (typ) {
        case "Returning User":
            console.log('this -' + typ);
            $('#sectorDis').html('<div class="form-group">\
                <label for="ippis">IPPIS</label>\
                    <input class="form-control w-100" name="ippis" id="ippis" required >\
            </div>');
            break;
        case "New User":
            console.log('this -' + typ);
            $('#sectorDis').html('<div class="form-group">\
                <label for="sector">Sector</label>\
                    <select class="form-control w-100" name="sector" id="sector" required >\
            <option value="">---</option>\
                <option value="Public Sector">Payroll (Public Sector)</option>\
            <option value="Private Sector">Non-Payroll (Private Sector)</option>\
            </select>\
            </div>');
            break;
        default:
            $('#sectorDis').html('');

    }

});


function loader() {
    return svgDis = '<div style="margin:10%; margin-left: 40%;">\
                    <svg xmlns="http://www.w3.org/2000/svg" width="100px" height="100px" viewBox="0 0 100 100">\
                    <rect y="25" width="10" height="50" rx="4" ry="4" fill="#7765C4">\
                    <animate attributeName="x" values="10;100" dur="1.2s" repeatCount="indefinite"/>\
                    <animateTransform attributeName="transform" type="rotate" from="0 10 70" to="-60 100 70" dur="1.2s" repeatCount="indefinite"/>\
                    <animate attributeName="opacity" values="0;1;0" dur="1.2s" repeatCount="indefinite"/>\
                    </rect>\
                    <rect y="25" width="10" height="50" rx="4" ry="4" fill="#7765C4">\
                    <animate attributeName="x" values="10;100" dur="1.2s" begin="0.4s" repeatCount="indefinite"/>\
                    <animateTransform attributeName="transform" type="rotate" from="0 10 70" to="-60 100 70" dur="1.2s" begin="0.4s" repeatCount="indefinite"/>\
                    <animate attributeName="opacity" values="0;1;0" dur="1.2s" begin="0.4s" repeatCount="indefinite"/>\
                    </rect>\
                    <rect y="25" width="10" height="50" rx="4" ry="4" fill="#7765C4">\
                    <animate attributeName="x" values="10;100" dur="1.2s" begin="0.8s" repeatCount="indefinite"/>\
                    <animateTransform attributeName="transform" type="rotate" from="0 10 70" to="-60 100 70" dur="1.2s" begin="0.8s" repeatCount="indefinite"/>\
                    <animate attributeName="opacity" values="0;1;0" dur="1.2s" begin="0.8s" repeatCount="indefinite"/>\
                    </rect>\
                    </svg>\
                    </div>';

}

function btnLoader() {
    return '<svg version="1.1" style="width: 50px; height: 10px; margin: 0px; margin-left: -15px; display:inline-block;"  x="0px" y="0px" viewBox="0 0 20 20" enable-background="new 0 0 0 0" xml:space="preserve"><circle fill="#fff" stroke="none" cx="6" cy="10" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite" begin="0.1"/> </circle><circle fill="#fff" stroke="none" cx="26" cy="10" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite" begin="0.2"/> </circle><circle fill="#fff" stroke="none" cx="46" cy="10" r="6"><animate attributeName="opacity" dur="1s" values="0;1;0" repeatCount="indefinite" begin="0.3"/></circle></svg>';
}

function getData(itemVal, mode) {

    var mode = mode.toLowerCase();
    $('#' + mode + 'Dis').html('<div class="input-group-text bg-warning border-0 text-white" title="checking">' + btnLoader() + '</div>');
    $.ajax({
        method: 'POST',
        url: "../model/action.php",
        data: { itemVal: itemVal, mode: mode },
        dataType: "json",
        success: function(data) {

            if (data.status === 200) {
                var response = data.message;
                $('#' + mode + 'Dis').html('<div class="input-group-text bg-success border-0 text-white" title="' + response.Employee_Name + '">&#10003;</div>');

            } else {
                $('#' + mode + 'Dis').html('<div class="input-group-text bg-danger border-0 text-white" title="' + data.message + '">&#x26A0;</div>');
            }
        },
        error: function(error) {
            $('#' + mode + 'Dis').html('<div class="input-group-text bg-danger border-0 text-white">&#x26A0;</div>');
            console.log(error);
        }
    });

    return;
};





// Facebook Your SDK code